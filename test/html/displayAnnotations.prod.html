<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8"/>

  <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script src="https://cdn.quilljs.com/latest/quill.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/vuex/2.3.1/vuex.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.3.1/vue.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.16.1/axios.min.js"></script>

  <!-- <script src="https://unpkg.com/@kba/anno-webpack"></script> -->
  <script>
    window.ANNO_ACL_DATA='[[{}], true]'
  </script>
  <script src="https://www.ub.uni-heidelberg.de/cdn/authorities-client/latest/authorities-client.js"> </script>
  <!-- <script src="../../../../../github.com/kba/anno-common/anno-webpack/dist/anno.min.js"> </script> -->
  <script src="https://www.ub.uni-heidelberg.de/cdn/anno-common/dev/anno-common.js"> </script>
  <script src="https://unpkg.com/semtonotes-client"></script>
  <script src="https://unpkg.com/semtonotes-utils"></script>
  <script src="https://unpkg.com/@kba/xrx-vue"></script>
  <!-- <script src="../../dist/xrx-utils.js"></script> -->
  <!-- <script src="../../dist/xrx-vue.js"></script> -->

  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"/>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"/>

</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12">
                <div id="anno-anchor"></div>
            </div>
        </div>
    </div>
<script src="./fixtures.js"></script>
<script type="text/javascript" src="../../dist/anno-frontend.js"> </script>
<!-- <script type="text/javascript" src="../../dist/ubhd-anno.js"> </script> -->
<script type="text/javascript">

  $(function() {
    const props = {}
    window.location.hash.substr(1).split(';').forEach(kv => {
      const [k,v] = kv.split('=')
      props[k] = v
    })
    console.log({props})
    const authServer = props.authServer || 'https://anno.ub.uni-heidelberg.de/anno/auth'
    const annoServer = props.annoServer || 'http://anno.ub.uni-heidelberg.de/anno'
    const collection = props.collection || 'test'
    annoapp = displayAnnotations(Object.assign({

      container: document.getElementById("anno-anchor"),

      annoEndpoint: `${annoServer}/anno`,
      tokenEndpoint: `${authServer}/token/${collection}`,
      loginEndpoint: `${authServer}/login?c=${collection}`,
      requestEndpoint: `${authServer}/request?c=${collection}`,
      logoutEndpoint: null,
      purlTemplate: 'http://digi.ub.uni-heidelberg.de/PROJ/{{ slug }}',
      purlId: 'http://localhost:3000/anno/T5mEcx6uRG-kg9vtnkseeQ',

      collection,
      targetImage: "https://upload.wikimedia.org/wikipedia/commons/thumb/f/fd/Ghostscript_Tiger.svg/1024px-Ghostscript_Tiger.svg.png",
      targetThumbnail: "https://upload.wikimedia.org/wikipedia/commons/thumb/f/fd/Ghostscript_Tiger.svg/200px-Ghostscript_Tiger.svg.png",
      targetSource: window.location.href.replace(/\?.*/, '')
    }, props))
  })


</script></body></html>
